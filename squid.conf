# إعدادات Squid للعمل على Render

# البورت المتوافق مع Render
http_port 8080

# صفحة المعلومات
acl info_page url_path / /index.html
http_access allow info_page

# مصادقة المستخدم
auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwords
auth_param basic realm "Proxy Server - Render"
auth_param basic credentialsttl 2 hours
acl authenticated proxy_auth REQUIRED

# قواعد الوصول
http_access allow authenticated
http_access deny all

# إعدادات الكاش
cache_dir ufs /var/spool/squid 100 16 256
maximum_object_size 50 MB
minimum_object_size 0 KB
maximum_object_size_in_memory 512 KB

# تحسين الأداء
cache_mem 64 MB
read_ahead_gap 16 KB
quick_abort_min 0 KB
quick_abort_max 0 KB

# السجلات
access_log /var/log/squid/access.log
cache_log /var/log/squid/cache.log
cache_store_log none

# الأمان
forwarded_for delete
request_header_access Via deny all
request_header_access X-Forwarded-For deny all
request_header_access Cache-Control deny all

# سياسة الرفض
deny_info TCP_RESET all

# تحسين للويب
half_closed_clients off
pipeline_prefetch on
